<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Safety Clearance Headroom Calculator</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f5f5f5;
    margin:0;
    padding:15px;
}

.card{
    background:white;
    border-radius:15px;
    padding:18px;
    margin-bottom:20px;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
}

h2{
    color:#c0392b;
}

input,select{
    width:100%;
    padding:12px;
    margin-top:8px;
    margin-bottom:15px;
    border-radius:10px;
    border:2px solid #ff6b6b;
    font-size:16px;
}

/* Highlight FAIL */
.failInput{
    border:3px solid red !important;
    background:#ffe6e6;
}

.layout-img{
    width:100%;
    border-radius:15px;
    margin-top:10px;
}

.result{
    padding:20px;
    border-radius:15px;
    font-size:18px;
    text-align:center;
    color:white;
}

.pass{
    background:#2ecc71;
}

.fail{
    background:#e74c3c;
}
</style>
</head>

<body>

<!-- Layout -->
<div class="card">
<h2>Elevator Layout</h2>

<select id="layoutSelect" onchange="changeLayout()">
<option value="">เลือก Layout</option>
<option value="MR">MR</option>
<option value="MRL">MRL</option>
</select>

<img id="layoutImage" class="layout-img" style="display:none;">
</div>


<!-- Lift Data -->
<div class="card">
<h2>Lift Data</h2>

<label>VKN (m/s)</label>
<select id="vkn" onchange="autoSKS()">
<option value="">--เลือก--</option>
<option>0.63</option>
<option>0.80</option>
<option>1.00</option>
<option>1.50</option>
<option>1.60</option>
<option>1.75</option>
<option>2.00</option>
<option>2.50</option>
<option>3.00</option>
</select>

<label>SKS (mm)</label>
<input id="sks" readonly>
</div>


<!-- Buffer -->
<div class="card">
<h2>Buffer and Offset Values</h2>

<label>HGP ระยะรันบายโครงเวท (mm)</label>
<input id="hgp" type="number" oninput="calculate()">

<label>HPHG ระยะยุบของ Buffer (mm)</label>
<input id="hphg" type="number" oninput="calculate()">

<label>X ระยะลิฟท์จอดไม่เสมอชั้น (วัดจากซิลประตูในถึงซิลประตูนอก) (mm)</label>
<input id="x" type="number" oninput="calculate()">
</div>


<!-- Measured -->
<div class="card">
<h2>Measured Distances</h2>

<label>A ระยะจากพื้นหลังคาลิฟต์ วัดถึงเพดานปล่องหรือส่วนที่ยื่นลงมาหรือฮุค (mm)</label>
<input id="a" type="number" oninput="calculate()">

<label>B ระยะจากราวกันตก วัดถึงเพดานปล่องหรือส่วนที่ยื่นลงมาหรือฮุค (mm)</label>
<input id="b" type="number" oninput="calculate()">

<label>D ระยะจากGuild shoeหรือบนRoller วัดถึงปลายรางลิฟต์ (mm)</label>
<input id="d" type="number" oninput="calculate()">
</div>


<!-- Result -->
<div class="card">
<h2>Result</h2>
<div id="resultBox" class="result pass">
Waiting for input...
</div>
</div>



<script>

/* ---------- SKS TABLE ---------- */
const sksTable = {
"0.63":14,
"0.80":23,
"1.00":35,
"1.50":79,
"1.60":90,
"1.75":108,
"2.00":140,
"2.50":219,
"3.00":315
};


/* ---------- Layout Image ---------- */
function changeLayout(){

    const type = document.getElementById("layoutSelect").value;
    const img = document.getElementById("layoutImage");

    if(type==="MR"){
        img.src="image/layout-mr.jpeg";
        img.style.display="block";
    }
    else if(type==="MRL"){
        img.src="image/layout-mrl.jpeg";
        img.style.display="block";
    }
    else{
        img.style.display="none";
    }
}


/* ---------- Auto SKS ---------- */
function autoSKS(){
    let vkn = document.getElementById("vkn").value;
    document.getElementById("sks").value = sksTable[vkn] || "";
    calculate();
}


/* ---------- Calculation ---------- */
function calculate(){

    let A = parseFloat(document.getElementById("a").value)||0;
    let B = parseFloat(document.getElementById("b").value)||0;
    let D = parseFloat(document.getElementById("d").value)||0;

    let reqA = 1000;
    let reqB = 300;
    let reqD = 100;

    let passA = A >= reqA;
    let passB = B >= reqB;
    let passD = D >= reqD;

    /* Highlight Fail */
    highlight("a",passA);
    highlight("b",passB);
    highlight("d",passD);

    let overall = passA && passB && passD;

    let html = `
    A : ${passA ? "PASS ✔" : "FAIL ✖"} (${A} / ${reqA} mm)<br>
    B : ${passB ? "PASS ✔" : "FAIL ✖"} (${B} / ${reqB} mm)<br>
    D : ${passD ? "PASS ✔" : "FAIL ✖"} (${D} / ${reqD} mm)<br><br>
    <b>Overall : ${overall ? "PASS ✔" : "FAIL ✖"}</b>
    `;

    let box = document.getElementById("resultBox");
    box.innerHTML = html;
    box.className = overall ? "result pass" : "result fail";
}


/* ---------- Highlight Function ---------- */
function highlight(id,pass){

    let el = document.getElementById(id);

    if(!pass){
        el.classList.add("failInput");
    }
    else{
        el.classList.remove("failInput");
    }
}

</script>

</body>
</html>
