<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Safety Clearance Headroom Calculator</title>

<style>

body{
font-family: Arial, sans-serif;
background:#f4f4f4;
padding:20px;
}

.card{
background:white;
padding:20px;
margin-bottom:20px;
border-radius:20px;
box-shadow:0 5px 15px rgba(0,0,0,0.1);
}

h2{ color:#c0392b; }

input,select{
width:100%;
padding:15px;
margin-top:10px;
margin-bottom:20px;
border-radius:15px;
border:2px solid #ff9f9f;
font-size:18px;
}

input.fail{
border:3px solid red;
background:#ffe6e6;
}

.resultBox{
padding:18px;
border-radius:15px;
margin-bottom:12px;
color:white;
font-size:18px;
text-align:center;
}

.pass{ background:#2ecc71; }
.fail{ background:#e74c3c; }

.layoutImg{
width:100%;
border-radius:15px;
margin-top:15px;
display:none;
}

.green{color:#00ff7f;font-weight:bold;}
.red{color:#ff3b3b;font-weight:bold;}

</style>
</head>

<body>

<!-- Layout -->
<div class="card">

<h2>Elevator Layout เลือก MR/MRL</h2>

<select id="layoutSelect" onchange="showLayout()">
<option value="">Select Layout</option>
<option value="mr">MR</option>
<option value="mrl">MRL</option>
</select>

<img id="imgMR" class="layoutImg" src="image/layout-mr.jpeg">
<img id="imgMRL" class="layoutImg" src="image/layout-mrl.jpeg">

</div>

<!-- Speed -->
<div class="card">

<h2>Lift Speed</h2>

<label>VKN (m/s)</label>
<select id="vkn">
<option value="">-- เลือก --</option>
<option value="0.63">0.63</option>
<option value="0.80">0.80</option>
<option value="1.00">1.00</option>
<option value="1.50">1.50</option>
<option value="1.60">1.60</option>
<option value="1.75">1.75</option>
<option value="2.00">2.00</option>
<option value="2.50">2.50</option>
<option value="3.00">3.00</option>
</select>

<label>SKS (mm)</label>
<input id="sks" readonly>

</div>

<!-- Buffer -->
<div class="card">

<h2>Buffer and Offset Values</h2>

<label>HGP ระยะรันบายโครงเวท (mm)</label>
<input id="hgp" type="number">

<label>HPHG ระยะยุบของ Buffer โครงเวท (mm)</label>
<input id="hphg" type="number">

<label>X ระยะลิฟท์จอดไม่เสมอชั้น (mm)</label>
<input id="x" type="number">

</div>

<!-- Measurement -->
<div class="card">

<h2>Measured Distances</h2>

<label>A ระยะจากพื้นหลังคาลิฟต์ ถึงเพดานปล่อง (mm)</label>
<input id="a" type="number">

<label>B ระยะจากราวกันตก ถึงเพดานปล่อง (mm)</label>
<input id="b" type="number">

<label>D ระยะจาก Guild shoe ถึงปลายรางลิฟต์ (mm)</label>
<input id="d" type="number">

</div>

<!-- Result -->
<div class="card">

<h2>Result</h2>

<div id="resA" class="resultBox"></div>
<div id="resB" class="resultBox"></div>
<div id="resD" class="resultBox"></div>
<div id="resAll" class="resultBox"></div>
<div id="formula"></div>

</div>

<script>

/* SKS TABLE */
const sksTable={
"0.63":14,
"0.80":23,
"1.00":35,
"1.50":79,
"1.60":90,
"1.75":108,
"2.00":140,
"2.50":219,
"3.00":315
};

/* Layout */
function showLayout(){

let layout=document.getElementById("layoutSelect").value;

document.getElementById("imgMR").style.display="none";
document.getElementById("imgMRL").style.display="none";

if(layout==="mr") document.getElementById("imgMR").style.display="block";
if(layout==="mrl") document.getElementById("imgMRL").style.display="block";

}

/* Highlight */
function highlight(id,pass){

let el=document.getElementById(id);
pass?el.classList.remove("fail"):el.classList.add("fail");

}

/* Result Text */
function buildText(label,value,req){

let diff=value-req;

if(value>=req){
return `${label} : ผ่าน ✔ (${value} / ${req} mm)<br>
<span class="green">เหลือ : +${diff} mm</span>`;
}else{
return `${label} : ไม่ผ่าน ✖ (${value} / ${req} mm)<br>
<span class="red">ขาดไป : ${Math.abs(diff)} mm</span>`;
}

}

/* Result Box */
function resultBox(id,pass,html){

let box=document.getElementById(id);
box.className=pass?"resultBox pass":"resultBox fail";
box.innerHTML=html;

}

/* Real-time Calculate */
function calculate(){

let vkn=document.getElementById("vkn").value;
document.getElementById("sks").value=sksTable[vkn]||"";

let sks=parseFloat(document.getElementById("sks").value)||0;
let hgp=parseFloat(document.getElementById("hgp").value)||0;
let hphg=parseFloat(document.getElementById("hphg").value)||0;
let x=parseFloat(document.getElementById("x").value)||0;

let A=parseFloat(document.getElementById("a").value)||0;
let B=parseFloat(document.getElementById("b").value)||0;
let D=parseFloat(document.getElementById("d").value)||0;

let Y=sks+hgp+hphg+x;

let Ay=A-Y;
let By=B-Y;
let Dy=D-Y;

let passA=Ay>=1000;
let passB=By>=300;
let passD=Dy>=100;
let overall=passA&&passB&&passD;

highlight("a",passA);
highlight("b",passB);
highlight("d",passD);

resultBox("resA",passA,buildText("A-Y",Ay,1000));
resultBox("resB",passB,buildText("B-Y",By,300));
resultBox("resD",passD,buildText("D-Y",Dy,100));
resultBox("resAll",overall,`Overall : ${overall?"ผ่าน ✔":"ไม่ผ่าน ✖"}`);

document.getElementById("formula").innerHTML=
`<br>สูตร : Y = SKS + HGP + HPHG + X = ${sks}+${hgp}+${hphg}+${x} = ${Y} mm`;

}

/* Event Real-time */
document.querySelectorAll("input,select").forEach(el=>{
el.addEventListener("input",calculate);
});

</script>

</body>
</html>
