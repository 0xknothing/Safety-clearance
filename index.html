<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EN81 Safety Distance Calculator</title>

<style>

body{
font-family: Arial, sans-serif;
background:#f3f4f6;
margin:0;
}

header{
background:#d32f2f;
color:white;
padding:15px;
text-align:center;
font-size:22px;
font-weight:bold;
}

.container{
padding:15px;
}

.card{
background:white;
border-radius:14px;
padding:15px;
margin-bottom:15px;
box-shadow:0 2px 6px rgba(0,0,0,0.2);
}

.card h3{
margin-top:0;
color:#d32f2f;
}

label{
font-weight:bold;
display:block;
margin-top:12px;
}

input,select{
width:100%;
padding:10px;
font-size:20px;
border-radius:8px;
border:2px solid #ff5252;
}

.layout-img{
width:100%;
border-radius:10px;
margin-top:10px;
}

.result{
font-size:22px;
margin-top:10px;
font-weight:bold;
}

.pass{ color:green; }
.fail{ color:red; }

footer{
text-align:center;
padding:10px;
color:#777;
}

</style>
</head>

<body>

<header>
EN81 Safety Distance Calculator
</header>

<div class="container">

<!-- Layout -->
<div class="card">

<h3>üìê ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Layout</h3>

<label>‡∏ä‡∏ô‡∏¥‡∏î‡∏•‡∏¥‡∏ü‡∏ï‡πå</label>
<select id="layoutSelect" onchange="changeLayout()">
<option value="mr">Machine Room (MR)</option>
<option value="mrl">MRL</option>
</select>

<img id="layoutImg" class="layout-img" src="image/layout-mr.jpg">

</div>

<!-- Elevator Info -->
<div class="card">

<h3>üöÄ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏¥‡∏ü‡∏ï‡πå</h3>

<label>‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏•‡∏¥‡∏ü‡∏ï‡πå VKN (m/s)</label>
<select id="VKN" onchange="autoSKS()">
<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</option>
<option value="0.63">0.63</option>
<option value="0.80">0.80</option>
<option value="1.00">1.00</option>
<option value="1.50">1.50</option>
<option value="1.60">1.60</option>
<option value="1.75">1.75</option>
<option value="2.00">2.00</option>
<option value="2.50">2.50</option>
<option value="3.00">3.00</option>
</select>

<label>SKS Jump Distance (mm)</label>
<input type="number" id="SKS">

</div>

<!-- Measured -->
<div class="card">

<h3>üìè ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÑ‡∏î‡πâ</h3>

<label>A (mm)</label>
<input type="number" id="A">

<label>B (mm)</label>
<input type="number" id="B">

<label>D (mm)</label>
<input type="number" id="D">

</div>

<!-- Buffer -->
<div class="card">

<h3>üß± Buffer / Stroke</h3>

<label>HGP (mm)</label>
<input type="number" id="HGP">

<label>HPHG (mm)</label>
<input type="number" id="HPHG">

<label>X Offset (mm)</label>
<input type="number" id="X">

</div>

<!-- Result -->
<div class="card">

<h3>üìä ‡∏ú‡∏•‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</h3>

<div class="result">Total Y = <span id="Y">0</span> mm</div>

<div class="result">
A-Y = <span id="AY">0</span> mm
<span id="AYstatus"></span>
</div>

<div class="result">
B-Y = <span id="BY">0</span> mm
<span id="BYstatus"></span>
</div>

<div class="result">
D-Y = <span id="DY">0</span> mm
<span id="DYstatus"></span>
</div>

</div>

</div>

<footer>
EN81 Inspection Tool
</footer>

<script>

/* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Layout */
function changeLayout(){

let type = document.getElementById("layoutSelect").value;
let img = document.getElementById("layoutImg");

if(type === "mr"){
img.src = "image/layout-mr.jpg";
}

if(type === "mrl"){
img.src = "image/layout-mrl.jpg";
}

}

/* ‡∏ï‡∏≤‡∏£‡∏≤‡∏á SKS */
const sksTable = {
0.63:14,
0.80:23,
1.00:35,
1.50:79,
1.60:90,
1.75:108,
2.00:140,
2.50:219,
3.00:315
};

/* Auto SKS */
function autoSKS(){

let v = document.getElementById("VKN").value;

if(sksTable[v]){
document.getElementById("SKS").value = sksTable[v];
}

calculate();
}

/* ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì */
function calculate(){

let A = getVal("A");
let B = getVal("B");
let D = getVal("D");
let SKS = getVal("SKS");
let HGP = getVal("HGP");
let HPHG = getVal("HPHG");
let X = getVal("X");

let Y = SKS + HGP + HPHG + X;

let AY = A - Y;
let BY = B - Y;
let DY = D - Y;

setText("Y",Y);
setText("AY",AY);
setText("BY",BY);
setText("DY",DY);

setStatus("AYstatus",AY,1000);
setStatus("BYstatus",BY,300);
setStatus("DYstatus",DY,100);

}

function getVal(id){
return Number(document.getElementById(id).value);
}

function setText(id,val){
document.getElementById(id).innerText = val;
}

function setStatus(id,val,limit){

let el = document.getElementById(id);

if(val >= limit){
el.innerHTML = " ‚úî ‡∏ú‡πà‡∏≤‡∏ô";
el.className = "pass";
}else{
el.innerHTML = " ‚úñ ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô";
el.className = "fail";
}

}

/* realtime */
document.querySelectorAll("input").forEach(input=>{
input.addEventListener("input",calculate);
});

/* ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ default */
window.onload = changeLayout;

</script>

</body>
</html>
